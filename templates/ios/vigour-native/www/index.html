<html>
    <body>
        <h1>Vigour.io</h1>
        <!-- 
            script will work with http is app has setting in info.plist
            http://ste.vn/2015/06/10/configuring-app-transport-security-ios-9-osx-10-11/
         -->
        <!--script src="http://mtv-develop.vigour.io/build.js"></script-->
        <script>
            
            'use strict'
            
            alert(1)

            window.vigour = {}
            window.vigour.native = {}
            window.vigour.native.bridge = {}
            window.vigour.native.bridge.error = function error (err, pluginId) {
                console.log("**ERROR**")
                if (pluginId) {
                    console.log(pluginId)
                }
                console.log(err)
            }
            window.vigour.native.bridge.receive = function receive (err, message, pluginId) {
                console.log("**RECEIVE**")
                if (pluginId) {
                    console.log(pluginId)
                }
                if (err) {
                    console.log(err)
                }
                if (message) {
                    console.log(message)
                }
            }
            window.vigour.native.bridge.result = function receive (cbId, err, response) {
                console.log("**RESULT**")
                if (err) {
                    console.log(err)
                }
                if (cbId) {
                    console.log(cbId)
                }
                if (response) {
                    console.log(response)
                }
            }
            window.vigour.native.bridge.ready = function(err, response, pluginId) {
                console.log("**READY**")
                if (err) {
                    console.log(err)
                }
                else {
                    if (pluginId) {
                        console.log(pluginId)
                    }
                    console.log(response[pluginId])
                    if(pluginId == "vigour.logger") {
                        console.log("Console log should work in debug mode")
                    }
                }
            }


            /*
            var callbacks = [testCallback]

            function receive (cbId, err, response) {
                callbacks[cbId](err, response)
            }

            var message = {
                pluginId: "vigour.logger",
                fnName: "log",
                opts: {},
                cbId: 0
            }

            window.webkit.messageHandlers.vigourBridgeHandler.postMessage(message)
             */
        
        </script>
    </body>
</html>
